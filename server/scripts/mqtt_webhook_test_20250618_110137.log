[2025-06-18 11:01:37] 
================================================================================
[2025-06-18 11:01:37]   MQTT Webhook API è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬ (Python)
[2025-06-18 11:01:37] ================================================================================
[2025-06-18 11:01:37] â„¹ï¸  æµ‹è¯•ç›®æ ‡: http://43.165.186.134:8888
[2025-06-18 11:01:37] â„¹ï¸  æ—¥å¿—æ–‡ä»¶: mqtt_webhook_test_20250618_110137.log
[2025-06-18 11:01:37] â„¹ï¸  å¼€å§‹æ—¶é—´: 2025-06-18 11:01:37
[2025-06-18 11:01:37] 
================================================================================
[2025-06-18 11:01:37]   æœåŠ¡å™¨è¿é€šæ€§
[2025-06-18 11:01:37] ================================================================================
[2025-06-18 11:01:38] âœ… æœåŠ¡å™¨è¿é€šæ€§æ­£å¸¸ (èƒ½æ”¶åˆ°404å“åº”)
[2025-06-18 11:01:38] 
================================================================================
[2025-06-18 11:01:38]   æµ‹è¯•1: è§’è‰²è¯·æ±‚Hook - æ­£å¸¸åˆ†é…è§’è‰²
[2025-06-18 11:01:38] ================================================================================
[2025-06-18 11:01:38] â„¹ï¸  æ­£åœ¨æµ‹è¯•: æ­£å¸¸è§’è‰²åˆ†é…
[2025-06-18 11:01:38] â„¹ï¸  è¯·æ±‚URL: http://43.165.186.134:8888/mqtt/hooks/role_request
[2025-06-18 11:01:38] â„¹ï¸  è¯·æ±‚æ•°æ®: {
  "clientid": "user123-mobile-1750215698",
  "username": "user123",
  "topic": "nfc_relay/role_request",
  "payload": {
    "role": "mobile",
    "force_kick": false,
    "device_info": {
      "device_model": "iPhone 14",
      "os_version": "iOS 16.0",
      "app_version": "1.0.0"
    }
  },
  "timestamp": 1750215698
}
[2025-06-18 11:01:39] âœ… [æ­£å¸¸è§’è‰²åˆ†é…] æµ‹è¯•é€šè¿‡ (HTTP 200 OK)
[2025-06-18 11:01:39] â„¹ï¸  å“åº”æ•°æ®:
[2025-06-18 11:01:39] {
  "code": 0,
  "msg": "è§’è‰²åˆ†é…æˆåŠŸ",
  "data": {
    "action": "role_assigned"
  }
}
[2025-06-18 11:01:39] 
================================================================================
[2025-06-18 11:01:39]   æµ‹è¯•2: è§’è‰²è¯·æ±‚Hook - è§’è‰²å†²çªæ£€æµ‹
[2025-06-18 11:01:39] ================================================================================
[2025-06-18 11:01:39] â„¹ï¸  æ­£åœ¨æµ‹è¯•: è§’è‰²å†²çªæ£€æµ‹ (æ— çœŸå®å†²çª)
[2025-06-18 11:01:39] â„¹ï¸  è¯·æ±‚URL: http://43.165.186.134:8888/mqtt/hooks/role_request
[2025-06-18 11:01:39] â„¹ï¸  è¯·æ±‚æ•°æ®: {
  "clientid": "user123-pc-1750215699",
  "username": "user123",
  "topic": "nfc_relay/role_request",
  "payload": {
    "role": "pc",
    "force_kick": false,
    "device_info": {
      "device_model": "Windows PC",
      "os_version": "Windows 11"
    }
  },
  "timestamp": 1750215699
}
[2025-06-18 11:01:39] âœ… [è§’è‰²å†²çªæ£€æµ‹ (æ— çœŸå®å†²çª)] æµ‹è¯•é€šè¿‡ (HTTP 200 OK)
[2025-06-18 11:01:39] â„¹ï¸  å“åº”æ•°æ®:
[2025-06-18 11:01:39] {
  "code": 0,
  "msg": "è§’è‰²åˆ†é…æˆåŠŸ",
  "data": {
    "action": "role_assigned"
  }
}
[2025-06-18 11:01:39] 
================================================================================
[2025-06-18 11:01:39]   æµ‹è¯•3: è§’è‰²è¯·æ±‚Hook - å¼ºåˆ¶è¸¢ä¸‹çº¿
[2025-06-18 11:01:39] ================================================================================
[2025-06-18 11:01:39] â„¹ï¸  æ­£åœ¨æµ‹è¯•: å¼ºåˆ¶è¸¢ä¸‹çº¿
[2025-06-18 11:01:39] â„¹ï¸  è¯·æ±‚URL: http://43.165.186.134:8888/mqtt/hooks/role_request
[2025-06-18 11:01:39] â„¹ï¸  è¯·æ±‚æ•°æ®: {
  "clientid": "user123-pc-force-1750215699",
  "username": "user123",
  "topic": "nfc_relay/role_request",
  "payload": {
    "role": "pc",
    "force_kick": true,
    "device_info": {
      "device_model": "Windows PC New"
    }
  },
  "timestamp": 1750215699
}
[2025-06-18 11:01:39] âœ… [å¼ºåˆ¶è¸¢ä¸‹çº¿] æµ‹è¯•é€šè¿‡ (HTTP 200 OK)
[2025-06-18 11:01:39] â„¹ï¸  å“åº”æ•°æ®:
[2025-06-18 11:01:39] {
  "code": 0,
  "msg": "è§’è‰²åˆ†é…æˆåŠŸ",
  "data": {
    "action": "role_assigned"
  }
}
[2025-06-18 11:01:39] 
================================================================================
[2025-06-18 11:01:39]   æµ‹è¯•4: è§’è‰²è¯·æ±‚Hook - æ— æ•ˆClientIDæ ¼å¼
[2025-06-18 11:01:39] ================================================================================
[2025-06-18 11:01:39] â„¹ï¸  æ­£åœ¨æµ‹è¯•: æ— æ•ˆClientIDæ ¼å¼
[2025-06-18 11:01:39] â„¹ï¸  è¯·æ±‚URL: http://43.165.186.134:8888/mqtt/hooks/role_request
[2025-06-18 11:01:39] â„¹ï¸  è¯·æ±‚æ•°æ®: {
  "clientid": "invalid_format",
  "username": "user123",
  "topic": "nfc_relay/role_request",
  "payload": {
    "role": "mobile"
  },
  "timestamp": 1750215699
}
[2025-06-18 11:01:40] âœ… [æ— æ•ˆClientIDæ ¼å¼] æµ‹è¯•é€šè¿‡ (HTTP 200 OK)
[2025-06-18 11:01:40] â„¹ï¸  å“åº”æ•°æ®:
[2025-06-18 11:01:40] {
  "code": 0,
  "msg": "è§’è‰²åˆ†é…æˆåŠŸ",
  "data": {
    "action": "role_assigned"
  }
}
[2025-06-18 11:01:40] 
================================================================================
[2025-06-18 11:01:40]   æµ‹è¯•5: è¿æ¥çŠ¶æ€Hook - å®¢æˆ·ç«¯è¿æ¥
[2025-06-18 11:01:40] ================================================================================
[2025-06-18 11:01:40] â„¹ï¸  æ­£åœ¨æµ‹è¯•: å®¢æˆ·ç«¯è¿æ¥äº‹ä»¶
[2025-06-18 11:01:40] â„¹ï¸  è¯·æ±‚URL: http://43.165.186.134:8888/mqtt/hooks/connection_status
[2025-06-18 11:01:40] â„¹ï¸  è¯·æ±‚æ•°æ®: {
  "event_type": "client_connected",
  "clientid": "user123-mobile-1750215700",
  "username": "user123",
  "connected_at": "2025-06-18T11:01:40.473917"
}
[2025-06-18 11:01:40] âœ… [å®¢æˆ·ç«¯è¿æ¥äº‹ä»¶] æµ‹è¯•é€šè¿‡ (HTTP 200 OK)
[2025-06-18 11:01:40] â„¹ï¸  å“åº”æ•°æ®:
[2025-06-18 11:01:40] {
  "code": 0,
  "data": {},
  "msg": "çŠ¶æ€æ›´æ–°æˆåŠŸ"
}
[2025-06-18 11:01:40] 
================================================================================
[2025-06-18 11:01:40]   æµ‹è¯•6: è¿æ¥çŠ¶æ€Hook - å®¢æˆ·ç«¯æ–­å¼€
[2025-06-18 11:01:40] ================================================================================
[2025-06-18 11:01:40] â„¹ï¸  æ­£åœ¨æµ‹è¯•: å®¢æˆ·ç«¯æ–­å¼€äº‹ä»¶
[2025-06-18 11:01:40] â„¹ï¸  è¯·æ±‚URL: http://43.165.186.134:8888/mqtt/hooks/connection_status
[2025-06-18 11:01:40] â„¹ï¸  è¯·æ±‚æ•°æ®: {
  "event_type": "client_disconnected",
  "clientid": "user123-mobile-1750215700",
  "username": "user123",
  "disconnected_at": "2025-06-18T11:01:40.892465",
  "reason": "normal"
}
[2025-06-18 11:01:41] âœ… [å®¢æˆ·ç«¯æ–­å¼€äº‹ä»¶] æµ‹è¯•é€šè¿‡ (HTTP 200 OK)
[2025-06-18 11:01:41] â„¹ï¸  å“åº”æ•°æ®:
[2025-06-18 11:01:41] {
  "code": 0,
  "data": {},
  "msg": "çŠ¶æ€æ›´æ–°æˆåŠŸ"
}
[2025-06-18 11:01:41] 
================================================================================
[2025-06-18 11:01:41]   æµ‹è¯•7: è¿æ¥çŠ¶æ€Hook - æ— æ•ˆäº‹ä»¶ç±»å‹
[2025-06-18 11:01:41] ================================================================================
[2025-06-18 11:01:41] â„¹ï¸  æ­£åœ¨æµ‹è¯•: æ— æ•ˆäº‹ä»¶ç±»å‹
[2025-06-18 11:01:41] â„¹ï¸  è¯·æ±‚URL: http://43.165.186.134:8888/mqtt/hooks/connection_status
[2025-06-18 11:01:41] â„¹ï¸  è¯·æ±‚æ•°æ®: {
  "event_type": "invalid_event",
  "clientid": "test-client",
  "username": "testuser"
}
[2025-06-18 11:01:41] âœ… [æ— æ•ˆäº‹ä»¶ç±»å‹] æµ‹è¯•é€šè¿‡ (HTTP 200 OK)
[2025-06-18 11:01:41] â„¹ï¸  å“åº”æ•°æ®:
[2025-06-18 11:01:41] {
  "code": 0,
  "data": {},
  "msg": "çŠ¶æ€æ›´æ–°æˆåŠŸ"
}
[2025-06-18 11:01:41] 
================================================================================
[2025-06-18 11:01:41]   æµ‹è¯•8: å‚æ•°é”™è¯¯æµ‹è¯• - ç¼ºå°‘å¿…è¦å­—æ®µ
[2025-06-18 11:01:41] ================================================================================
[2025-06-18 11:01:41] â„¹ï¸  æ­£åœ¨æµ‹è¯•: ç¼ºå°‘å¿…è¦å­—æ®µ
[2025-06-18 11:01:41] â„¹ï¸  è¯·æ±‚URL: http://43.165.186.134:8888/mqtt/hooks/role_request
[2025-06-18 11:01:41] â„¹ï¸  è¯·æ±‚æ•°æ®: {
  "clientid": "test-client"
}
[2025-06-18 11:01:42] âœ… [ç¼ºå°‘å¿…è¦å­—æ®µ] æµ‹è¯•é€šè¿‡ (HTTP 200 OK)
[2025-06-18 11:01:42] â„¹ï¸  å“åº”æ•°æ®:
[2025-06-18 11:01:42] {
  "code": 0,
  "msg": "è§’è‰²åˆ†é…æˆåŠŸ",
  "data": {
    "action": "role_assigned"
  }
}
[2025-06-18 11:01:42] 
================================================================================
[2025-06-18 11:01:42]   æµ‹è¯•ç»“æœæ±‡æ€»
[2025-06-18 11:01:42] ================================================================================
[2025-06-18 11:01:42] â„¹ï¸  æ€»æµ‹è¯•æ•°: 9
[2025-06-18 11:01:42] âœ… æˆåŠŸ: 9
[2025-06-18 11:01:42] âŒ å¤±è´¥: 0
[2025-06-18 11:01:42] â„¹ï¸  æˆåŠŸç‡: 100.00%
[2025-06-18 11:01:42] âœ…   - æœåŠ¡å™¨è¿é€šæ€§                         [  OK  ]
[2025-06-18 11:01:42] âœ…   - æ­£å¸¸è§’è‰²åˆ†é…                         [  OK  ]
[2025-06-18 11:01:42] âœ…   - è§’è‰²å†²çªæ£€æµ‹ (æ— çœŸå®å†²çª)                 [  OK  ]
[2025-06-18 11:01:42] âœ…   - å¼ºåˆ¶è¸¢ä¸‹çº¿                          [  OK  ]
[2025-06-18 11:01:42] âœ…   - æ— æ•ˆClientIDæ ¼å¼                   [  OK  ]
[2025-06-18 11:01:42] âœ…   - å®¢æˆ·ç«¯è¿æ¥äº‹ä»¶                        [  OK  ]
[2025-06-18 11:01:42] âœ…   - å®¢æˆ·ç«¯æ–­å¼€äº‹ä»¶                        [  OK  ]
[2025-06-18 11:01:42] âœ…   - æ— æ•ˆäº‹ä»¶ç±»å‹                         [  OK  ]
[2025-06-18 11:01:42] âœ…   - ç¼ºå°‘å¿…è¦å­—æ®µ                         [  OK  ]
[2025-06-18 11:01:42] 
================================================================================
[2025-06-18 11:01:42]   æµ‹è¯•å®Œæˆ
[2025-06-18 11:01:42] ================================================================================
[2025-06-18 11:01:42] â„¹ï¸  å®Œæˆæ—¶é—´: 2025-06-18 11:01:42
[2025-06-18 11:01:42] â„¹ï¸  è¯¦ç»†æ—¥å¿—å·²ä¿å­˜åˆ°: D:\work\IdeaProjects\gin-vue-admin\server\scripts\mqtt_webhook_test_20250618_110137.log
[2025-06-18 11:01:42] âœ… 
æ‰€æœ‰æµ‹è¯•é€šè¿‡! ğŸ‰
